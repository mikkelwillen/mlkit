MLKit v4.7.15 (v4.7.15-5-g08844e1f-dirty - 2025-11-11T09:50:04+01:00) [X64 Backend]

Usage: mlkit [OPTION]... [file.sml | file.sig | file.mlb]

Options:

--version, -v, -V
     Print version information and exit.

--help
     Print extended help information and exit.

--help S
     Print help information about an option and exit.

--man
     Print man-page and exit.

--SML_LIB S              (You_did_not_set_path_to_install_dir)
     Installation directory for the MLKit standard library.
     For normal execution you should not modify this value.
     However, if you wish to use the MLKit with an altered
     runtime system you can update this setting and the
     system will try to link to a runtime system found in
     the specified install directory.

--aggressive_opt, -aopt                                   (on)
     Enable aggressive optimisations, including aggressive
     inlining. These optimisations are not guaranteed to be
     region safe. Turning off garbage collection automatically
     turns off this option.

--alloc_protect_always                                   (off)
     Always protect allocation when parallelism is enabled. That
     is, disregard the result of protection inference.

--argobots, -argo                                        (off)
     When enabled, executables link with the Argobots
     lightweight thread library.

--assembler S, -as S                                 (as --64)
     This option specifies the assembler used.
     On Linux the default is 'as --64'. On macOS,
     the default is 'as -q'.

--chat, -verbose                                         (off)
     Print a message for each compilation step in the compiler.

--comments_in_asmcode                                    (off)
     Insert comments in assembler code.

--compile_only, -c                                       (off)
     Compile only. Suppresses generation of executable

--compiler_timings, -timings                             (off)
     Show compiler timings for each compilation phase.

--constant_folding, -cfold                                (on)
     Enable constant folding optimisations.

--contract                                                (on)
     Contract is responsible for inlining, specialization,
     elimination of dead code, and much else (Lambda
     Expression Optimiser).

--contract_regions, -cr                                  (off)
     When this option is enabled, identically typed
     regions bound by the same letregion construct
     are unified. Moreover, region parameters to
     non-exported functions are trimmed whenever
     possible.

--cross_module_opt, -cross_opt                            (on)
     Enable cross-module optimisation including inlining
     of small functions and specialisation of small
     recursive functions. Which optimisations are performed
     across modules is controlled by individual optimisation
     flags.

--dangling_pointers, -dangle                             (off)
     When this option is disabled, dangling pointers
     are avoided by forcing values captured in
     closures to live at-least as long as the closure
     itself. So as to make garbage collection sound,
     this option is disabled by default when garbage
     collection is enabled.

--dangling_pointers_statistics                           (off)
     When enabled, the compiler prints statistics about
     the number of times strengthening of the region typing
     rules (to avoid dangling pointers during evaluation)
     effects the target program. This flag is useful only
     when the flag -gc or -no_dangle is enabled.

--debug_compiler, -debug                                 (off)
     Print intermediate forms of a program during compilation.

--debug_constraint_solving, -dcs                         (off)
     Debug ReML constraint solving.

--debug_linking                                          (off)
     Debug linking of target code by showing which object
     files are linked together.

--debug_man_enrich                                       (off)
     Show information about why a program unit need be
     recompiled. A program unit (or a functor body)
     is recompiled if either (a) the program unit is
     modified, or (b) information about an identifier
     for which the program unit depends upon has changed.

--debug_parallelism, -Dpar                               (off)
     Debug parallelism, including protection inference.

--debug_which_at                                         (off)
     Debug storage mode analysis.

--delete_target_files                                     (on)
     Delete assembler files produced by the compiler. If you
     disable this flag, you can inspect the assembler code
     produced by the compiler.

--disable_atbot_analysis                                 (off)
     Disable storage mode analysis. That is, turn all
     allocation directives into attop.

--disable_flow_var                                       (off)
     Disable optimised compilation of control-flow
     code, such as conditional expressions.

--disable_spurious_type_variables                        (off)
     Disable inference of spurious type variables. This option
     may crash the reference tracing garbage collector as it may
     result in dangling pointers. This flag is relevant only when
     garbage collection is enabled.

--eliminate_explicit_records                              (on)
     Eliminate bindings of explicit records only used for
     selections. Transform
           let r = (e1,...,en) in ... #i r .. #j r ...
     into
           let x1=e1 in ... let xn=en in ... xi .. xj ...
     (Lambda Expression Optimiser).

--extra_gc_checks                                        (off)
     Insert check for GC even in functions that do not
     allocate.

--fix_floating                                            (on)
     Float fix-bindings into immediate let-bindings when
     possible to help tail-calls not be captured in let-
     region bindings.

--garbage_collection, -gc                                 (on)
     Enable garbage collection. When enabled, regions are
     garbage collected during execution of the program. When
     garbage collection is enabled, all values are tagged. Due
     to region inference, for most programs, the garbage
     collector is invoked less often than for systems based
     only on garbage collection. When garbage collection is
     enabled, introduction of dangling pointers are avoided by
     forcing values captured in closures to live at-least as
     long as the closure. Moreover, enabling garbage
     collection implicitly enables the preservation of tail
     calls (see the option ``preserve_tail_calls''.)

--gdb_support, -g                                        (off)
     When enabled, the compiler passes the option --gstabs
     to `as' (The GNU Assembler) and preserves the generated
     assembler files (.s files). Passing the --gstabs
     option to `as' makes it possible to step through
     the generated program using gdb (The GNU Debugger).

--generational_garbage_collection, -gengc                (off)
     Enable generational garbage collection. Same as option
     garbage collection except that two generations are used
     for each region.

--high_pointer_tagging                                    (on)
     When enabled, the 16 most-significant bits in pointers
     may be used for tagging.

--import_basislib, -basislib                              (on)
     Import Basis Library automatically in your projects. If 
     you wish to make use of the Standard ML Basis Library
     in your projects, this option should be turned on, unless
     you wish to import the Basis Library manually in your
     projects.

--inline_functors                                        (off)
     Inline functors during static interpretation instead of
     generating separate target code blocks for functor bodies
     and arguments. With the flag enabled, performance may
     increase with the cost of larger (re)compilation times.
     The flag may be controlled in mlb-files using mlb-
     annotations.

--inline_names S 
     Names of functions that should always be inlined
     if possible, no matter the setting of the flag
     --maximum_inline_size.

--libdirs S 
     This option controls where ld looks for
     archives. The format is a comma-separated list
     of directories; see the -libs entry. The default
     is the empty list; thus 'ld' will look for
     libraries in only the system specific default
     directores. The directories are passed to 'ld'
     using the -L option.

--libs S                                              (m,c,dl)
     For accessing a foreign function residing in
     an archive named libNAME.a from Standard ML code
     (using prim), you need to add 'NAME' to this
     comma-separated list. Notice that an object file
     (with extension '.o') is an archive if it is
     renamed to have extension '.a'. You may need to
     use the -libdirs option for specifying
     directories for which ld should look for library
     archives. The libraries are passed to 'ld' using
     the -l option.

--link_code S 
     Link-files to be linked together to form an
     executable.

--link_exe S, -ldexe S                                   (gcc)
     This option specifies the command used for linking
     an executable. The standard is to use 'gcc' for
     linking. When linking with c++ libraries, 'g++' is
     the linker you want. On Linux the default is 'gcc',
     whereas on semi-new macOS systems (23.2-26.1), the default
     is 'gcc -Wl,-ld_classic,-stack_size,0x10000000' and on
     older or newer macOS systems, the default is
     'gcc -Wl,-stack_size,0x10000000'.

--link_shared S, -ldshared S                             (gcc)
     This option specifies the command used for linking
     a shared object file. The standard is to use 'gcc' for
     linking.

--link_time_dead_code_elimination, -ltdce                 (on)
     Link time dead code elimination.

--load_basis_files S, -load S 
     Basis files to be loaded before compilation
     proper.

--log_to_file                                            (off)
     Log to files instead of stdout.

--maximum_inline_size N, -max_inl_sz N                   (200)
     Functions smaller than this size (counted in abstract
     syntax tree nodes) are inlined, even if they are used
     more than once. Functions that are used only once are
     always inlined. A function declared in one program unit
     may be inlined when applied in another program unit
     provided the function is sufficiently closed (refers only
     to exported identifiers) and provided the option
     --cross_opt is enabled.

--maximum_specialise_size N, -max_spec_sz N              (200)
     Function-parameterised functions smaller than this size
     (counted in abstract syntax tree nodes) are specialised if
     all applications of the function within its own body are
     applied to its formal function argument, even if they are used
     more than once. Functions that are used only once are
     specialised no matter their size. A function declared in
     one program unit may be specialised when applied in
     another program unit provided the function is sufficiently
     closed (refers only to exported identifiers) and provided
     the option --cross_opt is enabled. See also the option
     --specialize_recursive_functions.

--messages                                                (on)
     Print messages about reading source files and generating
     target files.

--minimize_fixs                                           (on)
     Minimize fix constructs (Lambda Expression Optimiser).

--mlb-subdir S 
     For ensuring that the smart recompilation scheme
     is not reusing target-code compiled with different
     settings, a string provided with the mlb-subdir
     option can ensure the use of consistently generated
     code. This option is Useful, in particular, when
     performing benchmarking.

--mlb_path_maps S, -mlb-path-map S 
     ML Basis path map files to be used.

--namebase S                                       (dummyBase)
     Name base to enforce unique names when compiling
     mlb-files.

--no_aggressive_opt, -no_aopt 
     Opposite of --aggressive_opt, -aopt.

--no_constant_folding, -no_cfold 
     Opposite of --constant_folding, -cfold.

--no_contract 
     Opposite of --contract.

--no_cross_module_opt, -no_cross_opt 
     Opposite of --cross_module_opt, -cross_opt.

--no_dangling_pointers, -no_dangle 
     Opposite of --dangling_pointers, -dangle.

--no_delete_target_files 
     Opposite of --delete_target_files.

--no_eliminate_explicit_records 
     Opposite of --eliminate_explicit_records.

--no_fix_floating 
     Opposite of --fix_floating.

--no_garbage_collection, -no_gc 
     Opposite of --garbage_collection, -gc.

--no_generational_garbage_collection, -no_gengc 
     Opposite of --generational_garbage_collection, -gengc.

--no_high_pointer_tagging 
     Opposite of --high_pointer_tagging.

--no_import_basislib, -no_basislib 
     Opposite of --import_basislib, -basislib.

--no_link_time_dead_code_elimination, -no_ltdce 
     Opposite of --link_time_dead_code_elimination, -ltdce.

--no_messages 
     Opposite of --messages.

--no_minimize_fixs 
     Opposite of --minimize_fixs.

--no_optimiser, -no_opt 
     Opposite of --optimiser, -opt.

--no_preserve_tail_calls, -no_ptc 
     Opposite of --preserve_tail_calls, -ptc.

--no_print_control_abbrev_layout, -no_abbrev 
     Opposite of --print_control_abbrev_layout, -abbrev.

--no_print_regions, -no_Pregions 
     Opposite of --print_regions, -Pregions.

--no_raggedRight 
     Opposite of --raggedRight.

--no_region_inference, -no_ri 
     Opposite of --region_inference, -ri.

--no_register_allocation 
     Opposite of --register_allocation.

--no_repository, -no_rep 
     Opposite of --repository, -rep.

--no_specialize_recursive_functions 
     Opposite of --specialize_recursive_functions.

--no_type_check_lambda 
     Opposite of --type_check_lambda.

--no_unbox_funargs 
     Opposite of --unbox_funargs.

--no_unbox_real_funargs 
     Opposite of --unbox_real_funargs.

--no_unbox_reals 
     Opposite of --unbox_reals.

--no_uncurrying, -no_uncurry 
     Opposite of --uncurrying, -uncurry.

--objs                                                   (off)
     If enabled, MLKit writes object-file paths to the file
     run or the file specified by -output. The path
     to the runtime system (archive file) is included. The
     option is best used together with the option
     -no_delete_target_files.

--optimiser, -opt                                         (on)
     Enable optimisation of intermediate language code
     (Lambda Expressions). Which optimisations are performed
     is controlled by individual flags. The optimisations
     include function inlining, function specialisation,
     fix-minimization, unboxing of function arguments, and
     elimination of unnecessary record constructions.

--output S, -o S                                         (run)
     The name of the executable file generated by
     the Kit.

--parallel_compilation N, -j N                             (1)
     The maximum number of parallel processes used
     for compilation.

--parallelism, -par                                      (off)
     When enabled, the runtime system supports
     parallel threads.

--parallelism_alloc_unprotected, -par0                   (off)
     When enabled, allocation into a region is not
     guaranteed to be atomic.

--preserve_tail_calls, -ptc                               (on)
     Avoid the wrapping of letregion constructs around
     tail calls. Turning on garbage collection
     automatically turns on this option.

--pretty_depth N                                           (5)
     This flag controls the pretty-printing depth of
     values printed in the REPL. The value must be an
     integer larger than zero.

--pretty_string_size N                                    (80)
     This flag controls the pretty-printing size of
     strings printed in the REPL. The value must be an
     integer larger than zero.

--print_K_normal_forms                                   (off)
     Print Region Expressions in K-Normal Form. Applicable,
     only after storage mode analysis has been applied.

--print_all_program_points, -Ppp                         (off)
     Print all program points when printing physical size
     inference expressions.

--print_bit_vectors                                      (off)

--print_calc_offset_program                              (off)

--print_call_explicit_expression, -Pcee                  (off)
     Print Region Expression with call annotations.

--print_clos_conv_program, -Pccp                         (off)
     Print Region Expression after closure conversion.

--print_closed_export_bases, -Pceb                       (off)
     Controls printing of closed export bases.

--print_constraints                                      (off)
     Print ReML effect constraints when printing region and
     effect variables.

--print_control_abbrev_layout, -abbrev                    (on)
     Abbreviate layout of multiplicity expressions and call-
     explicit expressions. For instance, do not show at-
     annotations for top-level functions, do not show at-
     annotations for immediate constants, do not show region-
     bindings for zero-size regions that are associated only
     with immediate constants, do not show empty formal and
     actual region parameter lists, do not show 'funcall' and
     'fncall' annotations, do not show 'id' casts on base values,
     do not show unique id for explicit region variables or 
     explicit effect variables.

--print_control_prefix_infix                             (off)
     Prefix infix operations with module identifier to further
     indicate the type of the operation.

--print_drop_regions_expression, -Pdre                   (off)
     Print Region Expression after dropping word regions and
     region arguments with only get-effects.

--print_drop_regions_expression_with_storage_modes, -Pdresm (off)
     Print Region Expression after dropping word regions and
     region arguments with only get-effects. Also print
     atbot and attop annotations resulting from storage mode
     analysis.

--print_effects, -Peffects                               (off)
     Print effects in region types.

--print_excon_name                                       (off)
     Print underlying unique name when printing excons.

--print_export_bases, -Peb                               (off)
     Controls printing of export bases.

--print_fetch_and_flush_program                          (off)
     Print program with instructions for activation
     record fetching and flushing.

--print_linearised_program                               (off)
     Print a linearlised representation of the
     program unit.

--print_lvar_name                                        (off)
     Print underlying unique name when printing lvars.

--print_normalized_program                               (off)
     Print Region Expression after K-normalisation.

--print_opt_lambda_expression, -Pole                     (off)
     Print Lambda Expression after optimisation.

--print_physical_size_inference_expression, -Ppse        (off)
     Print Region Expression after physical size inference.

--print_post_elab_ast, -Ppeast                           (off)
     Print ast after elaboration.

--print_region_flow_graph, -Prfg                         (off)
     Print a region flow graph for the program fragment
     and generate a .vcg-file, which can be viewed using
     the xvcg program.

--print_region_inferred_program, -Prip                   (off)
     Print region-inferred program.

--print_region_spreaded_program, -Prsp                   (off)
     Print region-spreaded program.

--print_region_static_env0, -Prse0                       (off)
     Print imported region static environment prior to
     region inference.

--print_regions, -Pregions                                (on)
     Print region variables in types and expressions.

--print_register_allocated_program                       (off)

--print_rho_levels                                       (off)
     Print levels of region and effect variables in types and
     intermediate forms. Levels control quantification of
     region and effect variables.

--print_rho_protection, -Prho_protection                 (off)
     Print protectedness of region variables if set (P or U).

--print_rho_types                                        (off)
     Print region types of region variables in types and
     intermediate forms. Possible region types are:
         p  Type of regions containing pairs.
         a  Type of regions containing arrays.
         r  Type of regions containing references.
         t  Type of regions containing triples.
         s  Type of regions containing strings.
         T  Type of regions containing other than the above
            kinds of values.

--print_simplified_program                               (off)
     Print simplified program after register
     allocation.

--print_storage_mode_expression, -Psme                   (off)
     Print Region Expression after storage mode analysis

--print_type_name_stamps, -Ptypestamps                   (off)
     Print type name stamps and their attributes in types
     and expressions.

--print_types, -Ptypes                                   (off)
     Print types when printing intermediate forms. For Lambda
     Expressions, ordinary ML types are printed, whereas for
     Region Expressions, region types are printed.

--quotation, -quot                                       (off)
     Enable support for quotations and anti-quotations.
     When enabled, the datatype
        datatype 'a frag = QUOTE of string
                         | ANTIQUOTE 'a
     is available in the initial environment. Moreover,
     values of this datatype may be constructed using
     the quotation/antiquotation syntax:
        val s = "world" 
        val a : string frag list = `hello ^s - goodbye`

--raggedRight                                             (on)
     Use ragged right margin in pretty-printing of
     expressions and types.

--recompile_basislib, -scratch                           (off)
     Recompile basis library from scratch. This option
     is useful together with other options that control
     code generation.

--region_inference, -ri                                   (on)
     With this flag disabled, all values are allocated in
     global regions.

--region_profiling, -prof                                (off)
     Enable region profiling. Object code stemming
     from compiling a program with region profiling enabled
     is instrumented with profiling information. When a program
     compiled with region profiling enabled is run, the program
     produces a profile file run.rp, which can then be read
     by the profiling tool rp2ps that comes with the MLKit to
     produce profiling graphs of various forms.

--regionvar N                                             (~1)
     Uses the provided number as the id of the first
     generated region variable. When this option is
     provided together with the -c option, a file f.rv
     is written in the MLB/ directory with two numbers
     in it: the id for the first region variable
     generated and the id for the last region variable
     generated. The number given must be greater than
     any id for a top-level region/effect variable (>9).

--register_allocation                                     (on)
     Perform register allocation. Without register allocation
     enabled, programs run somewhat slower--but they run and
     you save about 15 percent on compile time.

--reml                                                   (off)
     ReML is Standard ML with support for programming with 
     explicit regions, explicit effects, and effect 
     constraints. With ReML, atomic effects also include 
     mutation effects. Whereas ReML includes parallel 
     thread support, currently, ReML does not support 
     integration with reference-tracing garbage collection.

--report_boxities                                        (off)
     Report for every datatype declaration the inferred boxity
     (representation) of its value constructors.

--report_file_sig, -sig                                  (off)
     Report signatures for each file read.

--repository, -rep                                        (on)
     Use in-memory repository to avoid unnecessary
     recompilation. This flag should be disabled when
     compiling mlb-files, which make use of the file system
     as a repository.

--safeLinkTimeElimination                                (off)
     Treat this module as a library in the sense that
     the code can be eliminated if it is not used,
     even if the code has side effects.

--specialize_recursive_functions                          (on)
     Specialise recursive functions. Use the option
     maximum_specialise_size to control which functions
     are specialised. If this flag is on, functions that are
     applied only once are specialised, no matter the setting
     of --maximum_specialise_size (Lambda Expression Optimiser).

--statistics_after_optimisation, -stats_opt              (off)
     Report optimisation statistics after optimisation of
     Lambda Expression.

--statistics_spurious, -stats_spurious                   (off)
     Report statistics on spurious functions and instantiations
     of spurious type variable. This flag is relevant only when
     garbage collection is enabled.

--strip                                                  (off)
     If enabled, MLKit strips the generated executable.

--tag_pairs                                              (off)
     Use a tagged representation of pairs for garbage
     collection. Garbage collection works fine with a
     tag-free representation of pairs, so this option
     is here for measurement purposes.

--tag_values, -tag                                        (on)
     Enable tagging of values as used when garbage
     collection is enabled for implementing pointer
     traversal.

--type_check_lambda                                       (on)
     Type check lambda expression prior to performing region
     inference. Type checking is very fast and for normal use
     you should not disable this option. Type checking
     intermediate forms is very powerful for eliminating bugs
     in the compiler.

--unbox_funargs                                           (on)
     Unbox arguments to fix-bound functions, for which the
     argument 'a' is used only in contexts '#i a'. All call 
     sites are transformed to match the new function (Lambda
     Expression Optimiser).

--unbox_real_funargs                                      (on)
     Unbox arguments of type real to fix-bound functions, for which 
     the argument 'a' is used only in contexts that unboxes 'a'. All 
     call sites are transformed to match the new function. This 
     optimisation has effect only when the flags '-unbox_funargs' and 
     '-unbox_reals' are enabled (Lambda Expression Optimiser).

--unbox_reals                                             (on)
     Unbox real values and computations on real values inside
     functions. Real values stored in data structures and
     passed to functions are still boxed.

--uncurrying, -uncurry                                    (on)
     Enable uncurrying of curried functions. The uncurried
     function takes its arguments unboxed in registers or
     on the stack. For partial applications and non-
     application uses of the function, appropriate eta-
     expansions are applied.

--values_64bit                                            (on)
     Support 64-bit values. Should be enabled for 
     backends supporting 64-bit integers and words.

--warn_on_escaping_puts                                  (off)
     Enable the compiler to issue a warning whenever a 
     region type scheme contains a put effect on a region
     that is not quantified.

--warn_on_parallel_puts                                  (off)
     Enable the compiler to issue a warning whenever a 
     par-construct is passed functions with intersecting
     put effects.

--warn_spurious                                          (off)
     Warn on the presence of a spurious type variable. This
     flag is relevant only when garbage collection is enabled.

--width N, -w N                                          (100)
     Column width used when pretty printing intermediate code.

